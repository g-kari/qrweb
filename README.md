# QRコードスキャナー - クイックスタート

## GitHub Pages で使用する（推奨）

このアプリケーションはGitHub Pagesで公開されており、直接ブラウザでアクセスできます：

**🌐 [https://g-kari.github.io/qrweb/](https://g-kari.github.io/qrweb/)**

- インストール不要
- スマートフォンのブラウザで直接アクセス可能
- HTTPS対応でカメラ機能が安全に利用可能

## ローカルでの使用方法

### 1. スクリプトでサーバー起動

#### PowerShellスクリプト（推奨）
```powershell
.\start_qr_server.ps1
```

#### バッチファイル
```cmd
start_qr_server.bat
```

### 2. 手動でサーバー起動

#### Windows環境
```cmd
python -m http.server 8080 --bind 0.0.0.0
```

#### WSL Ubuntu環境
```bash
python3 -m http.server 8080 --bind 0.0.0.0
```

### 3. スマホでアクセス

1. PCのIPアドレスを確認（スクリプトが自動表示）
2. スマホのブラウザで `http://[IPアドレス]:8080` にアクセス
3. カメラの使用許可を与える
4. QRコードをスキャン

## 機能

- **QRコードスキャン**: リアルタイムでQRコードを読み取り
- **ファイルアップロード**: カメラが使用できない場合は画像ファイルからQRコードを読み取り
- **高精度位置情報取得**: jsQRライブラリを使用してQRコードの詳細な位置情報を取得
  - 4つの角の座標 (x, y) - 正確なピクセル位置
  - 中心点の座標 - 4つの角から計算した重心
  - QRコードのサイズ（幅・高さ） - ピクセル単位の実測値
  - 高精度な回転角度（傾き） - 度単位での角度（小数点第2位まで）
- **デュアルライブラリサポート**: jsQR（主要）+ html5-qrcode（フォールバック）
- **レスポンシブデザイン**: スマホ画面に最適化
- **HTTPS対応**: GitHub Pagesで安全にカメラ機能を利用

## アクセス方法

### GitHub Pages（推奨）
- [https://g-kari.github.io/qrweb/](https://g-kari.github.io/qrweb/) に直接アクセス
- インストールやサーバー起動不要
- スマートフォンで直接利用可能

### ローカル開発
- 下記の「ローカルでの使用方法」を参照

## 必要条件

### GitHub Pages利用時
- モダンなブラウザ（カメラAPIサポート）
- インターネット接続

### ローカル開発時
- PCとスマホが同じWi-Fiネットワークに接続
- Python 3.x または Node.js
- モダンなブラウザ（カメラAPIサポート）

## トラブルシューティング

### GitHub Pages でカメラが起動しない
- ブラウザでカメラの使用許可を与えているか確認
- HTTPS接続でアクセスしているか確認（GitHub Pagesは自動的にHTTPS）
- モダンなブラウザを使用しているか確認

### ローカル開発でのトラブル

#### サーバーが起動しない
- Python 3がインストールされているか確認（Windows）
- WSL Ubuntuが正常に動作しているか確認（代替手段として）
- ポート8080が他のアプリケーションで使用されていないか確認

#### スマホからアクセスできない
- PCとスマホが同じWi-Fiに接続されているか確認
- ファイアウォールでポート8080が許可されているか確認
- 正しいIPアドレスを使用しているか確認

#### カメラが起動しない
- ブラウザでカメラの使用許可を与えているか確認
- HTTPSではなくHTTPでアクセスしているか確認（ローカルネットワークの場合）

## 技術的特徴

### QR位置検出の実装
- **主要ライブラリ**: jsQR - 詳細な位置情報を提供
- **フォールバックライブラリ**: html5-qrcode - 基本的なQR読み取り
- **位置計算方式**: 
  - 中心点: 4つの角の座標の重心計算
  - サイズ: 上辺と左辺の距離から幅・高さを算出
  - 回転角: 上辺のベクトルからatan2で角度計算

### 表示される位置情報
```
🎯 QRコード位置情報
中心座標: (150, 150)
サイズ: 200 × 200 px  
回転角度: 15.30°
4つの角の座標:
  角1: (100, 120)
  角2: (200, 140)
  角3: (180, 220)
  角4: (80, 200)
```

## ファイル構成

```
qrweb/
├── index.html              # QRスキャナーのメインHTML
├── start_qr_server.ps1     # PowerShell起動スクリプト（ローカル開発用）
├── start_qr_server.bat     # バッチファイル起動スクリプト（ローカル開発用）
├── .nojekyll              # GitHub Pages設定ファイル
└── README.md              # このファイル
```
